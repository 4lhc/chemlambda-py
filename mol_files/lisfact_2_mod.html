<!DOCTYPE html>
<meta charset="utf-8">
<style>

.node {
  stroke: #fff;
  stroke-width: 1.5px;
}

.link {
  stroke: #999;
  stroke-opacity: .6;
}

</style>
<script type="application/json" id="mis">


{
    "nodes": [
        {
            "atom": "A_660_2",
            "size": 6,
            "color": "#91009a"
        },
        {
            "atom": "A_795",
            "size": 12,
            "color": "#8CC152"
        },
        {
            "atom": "FO_921_0",
            "size": 6,
            "color": "#f0a900"
        },
        {
            "atom": "FROUT_49",
            "size": 12,
            "color": "#91009a"
        },
        {
            "atom": "FO_921_1",
            "size": 3,
            "color": "#91009a"
        },
        {
            "atom": "A_890_1",
            "size": 3,
            "color": "#f0a900"
        },
        {
            "atom": "FO_921_2",
            "size": 3,
            "color": "#91009a"
        },
        {
            "atom": "A_858_0",
            "size": 3,
            "color": "#f0a900"
        },
        {
            "atom": "A_890",
            "size": 12,
            "color": "#8CC152"
        },
        {
            "atom": "A_220_0",
            "size": 3,
            "color": "#f0a900"
        },
        {
            "atom": "L_911_2",
            "size": 3,
            "color": "#91009a"
        },
        {
            "atom": "L_201_0",
            "size": 6,
            "color": "#f0a900"
        },
        {
            "atom": "FROUT_48_0",
            "size": 3,
            "color": "#f0a900"
        },
        {
            "atom": "A_858_2",
            "size": 6,
            "color": "#91009a"
        },
        {
            "atom": "FO_526_1",
            "size": 3,
            "color": "#91009a"
        },
        {
            "atom": "FO_766_0",
            "size": 6,
            "color": "#f0a900"
        },
        {
            "atom": "A_660_0",
            "size": 3,
            "color": "#f0a900"
        },
        {
            "atom": "FO_766_1",
            "size": 3,
            "color": "#91009a"
        },
        {
            "atom": "L_911",
            "size": 12,
            "color": "#b80000"
        },
        {
            "atom": "FO_526_0",
            "size": 6,
            "color": "#f0a900"
        },
        {
            "atom": "A_858_1",
            "size": 3,
            "color": "#f0a900"
        },
        {
            "atom": "A_863",
            "size": 12,
            "color": "#8CC152"
        },
        {
            "atom": "FO_700",
            "size": 12,
            "color": "#8CC152"
        },
        {
            "atom": "L_931_1",
            "size": 3,
            "color": "#91009a"
        },
        {
            "atom": "A_660_1",
            "size": 3,
            "color": "#f0a900"
        },
        {
            "atom": "FO_526_2",
            "size": 3,
            "color": "#91009a"
        },
        {
            "atom": "L_931",
            "size": 12,
            "color": "#b80000"
        },
        {
            "atom": "FO_700_1",
            "size": 3,
            "color": "#91009a"
        },
        {
            "atom": "A_863_1",
            "size": 3,
            "color": "#f0a900"
        },
        {
            "atom": "FO_766_2",
            "size": 3,
            "color": "#91009a"
        },
        {
            "atom": "L_201_2",
            "size": 3,
            "color": "#91009a"
        },
        {
            "atom": "FO_700_0",
            "size": 6,
            "color": "#f0a900"
        },
        {
            "atom": "L_70_0",
            "size": 6,
            "color": "#f0a900"
        },
        {
            "atom": "A_795_1",
            "size": 3,
            "color": "#f0a900"
        },
        {
            "atom": "A_220_2",
            "size": 6,
            "color": "#91009a"
        },
        {
            "atom": "A_795_2",
            "size": 6,
            "color": "#91009a"
        },
        {
            "atom": "L_931_2",
            "size": 3,
            "color": "#91009a"
        },
        {
            "atom": "L_931_0",
            "size": 6,
            "color": "#f0a900"
        },
        {
            "atom": "A_858",
            "size": 12,
            "color": "#8CC152"
        },
        {
            "atom": "FO_526",
            "size": 12,
            "color": "#8CC152"
        },
        {
            "atom": "FO_766",
            "size": 12,
            "color": "#8CC152"
        },
        {
            "atom": "A_660",
            "size": 12,
            "color": "#8CC152"
        },
        {
            "atom": "FO_921",
            "size": 12,
            "color": "#8CC152"
        },
        {
            "atom": "FROUT_48",
            "size": 12,
            "color": "#91009a"
        },
        {
            "atom": "FO_700_2",
            "size": 3,
            "color": "#91009a"
        },
        {
            "atom": "A_890_2",
            "size": 6,
            "color": "#91009a"
        },
        {
            "atom": "L_201_1",
            "size": 3,
            "color": "#91009a"
        },
        {
            "atom": "A_220",
            "size": 12,
            "color": "#8CC152"
        },
        {
            "atom": "A_795_0",
            "size": 3,
            "color": "#f0a900"
        },
        {
            "atom": "A_220_1",
            "size": 3,
            "color": "#f0a900"
        },
        {
            "atom": "L_70_2",
            "size": 3,
            "color": "#91009a"
        },
        {
            "atom": "L_70_1",
            "size": 3,
            "color": "#91009a"
        },
        {
            "atom": "A_890_0",
            "size": 3,
            "color": "#f0a900"
        },
        {
            "atom": "L_911_0",
            "size": 6,
            "color": "#f0a900"
        },
        {
            "atom": "L_911_1",
            "size": 3,
            "color": "#91009a"
        },
        {
            "atom": "A_863_0",
            "size": 3,
            "color": "#f0a900"
        },
        {
            "atom": "L_201",
            "size": 12,
            "color": "#b80000"
        },
        {
            "atom": "A_863_2",
            "size": 6,
            "color": "#91009a"
        },
        {
            "atom": "L_70",
            "size": 12,
            "color": "#b80000"
        },
        {
            "atom": "FROUT_49_0",
            "size": 3,
            "color": "#f0a900"
        }
    ],
    "links": [
        {
            "target": 49,
            "source": 0
        },
        {
            "target": 48,
            "source": 1
        },
        {
            "target": 33,
            "source": 1
        },
        {
            "target": 35,
            "source": 1
        },
        {
            "target": 59,
            "source": 3
        },
        {
            "target": 7,
            "source": 4
        },
        {
            "target": 5,
            "source": 6
        },
        {
            "target": 52,
            "source": 8
        },
        {
            "target": 5,
            "source": 8
        },
        {
            "target": 45,
            "source": 8
        },
        {
            "target": 11,
            "source": 10
        },
        {
            "target": 33,
            "source": 13
        },
        {
            "target": 9,
            "source": 14
        },
        {
            "target": 48,
            "source": 17
        },
        {
            "target": 53,
            "source": 18
        },
        {
            "target": 54,
            "source": 18
        },
        {
            "target": 10,
            "source": 18
        },
        {
            "target": 55,
            "source": 21
        },
        {
            "target": 28,
            "source": 21
        },
        {
            "target": 57,
            "source": 21
        },
        {
            "target": 31,
            "source": 22
        },
        {
            "target": 27,
            "source": 22
        },
        {
            "target": 44,
            "source": 22
        },
        {
            "target": 52,
            "source": 23
        },
        {
            "target": 31,
            "source": 25
        },
        {
            "target": 37,
            "source": 26
        },
        {
            "target": 23,
            "source": 26
        },
        {
            "target": 36,
            "source": 26
        },
        {
            "target": 16,
            "source": 27
        },
        {
            "target": 2,
            "source": 29
        },
        {
            "target": 37,
            "source": 30
        },
        {
            "target": 53,
            "source": 34
        },
        {
            "target": 24,
            "source": 35
        },
        {
            "target": 59,
            "source": 36
        },
        {
            "target": 7,
            "source": 38
        },
        {
            "target": 20,
            "source": 38
        },
        {
            "target": 13,
            "source": 38
        },
        {
            "target": 19,
            "source": 39
        },
        {
            "target": 14,
            "source": 39
        },
        {
            "target": 25,
            "source": 39
        },
        {
            "target": 15,
            "source": 40
        },
        {
            "target": 17,
            "source": 40
        },
        {
            "target": 29,
            "source": 40
        },
        {
            "target": 16,
            "source": 41
        },
        {
            "target": 24,
            "source": 41
        },
        {
            "target": 0,
            "source": 41
        },
        {
            "target": 2,
            "source": 42
        },
        {
            "target": 4,
            "source": 42
        },
        {
            "target": 6,
            "source": 42
        },
        {
            "target": 12,
            "source": 43
        },
        {
            "target": 15,
            "source": 44
        },
        {
            "target": 55,
            "source": 45
        },
        {
            "target": 19,
            "source": 46
        },
        {
            "target": 9,
            "source": 47
        },
        {
            "target": 49,
            "source": 47
        },
        {
            "target": 34,
            "source": 47
        },
        {
            "target": 12,
            "source": 50
        },
        {
            "target": 32,
            "source": 51
        },
        {
            "target": 28,
            "source": 54
        },
        {
            "target": 11,
            "source": 56
        },
        {
            "target": 46,
            "source": 56
        },
        {
            "target": 30,
            "source": 56
        },
        {
            "target": 20,
            "source": 57
        },
        {
            "target": 32,
            "source": 58
        },
        {
            "target": 51,
            "source": 58
        },
        {
            "target": 50,
            "source": 58
        }
    ]
}


</script>
<body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
<script>



//Constants for the SVG
var width = 500,
    height = 500;

//Set up the force layout
var force = d3.layout.force()
    .friction(.9)
    .charge(-30)
    .linkDistance(10)
	.gravity(.09)
    .linkStrength(1)
	//linkDistance( function(d) { return ((d.source.size + d.target.size + 3)/(40*2)); } )
    .size([width, height]);

//Append a SVG to the body of the html page. Assign this SVG as an object to svg
var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

//Read the data from the mis element 
var mis = document.getElementById('mis').innerHTML;
graph = JSON.parse(mis);

//Creates the graph data structure out of the json data
force.nodes(graph.nodes)
    .links(graph.links)
    .start();

//Create all the line svgs but without locations yet
var link = svg.selectAll(".link")
    .data(graph.links)
    .enter().append("line")
    .attr("class", "link")
    .style("stroke-width", '1px');

//Do the same with the circles for the nodes - no 
var node = svg.selectAll(".node")
    .data(graph.nodes)
    .enter().append("circle")
    .attr("class", "node")
    .attr("r", function (d) { return d.size; })
    .style("fill", function (d) { return d.color; })
    .call(force.drag);


//Now we are giving the SVGs co-ordinates - the force layout is generating the co-ordinates which this code is using to update the attributes of the SVG elements
force.on("tick", function () {
    link.attr("x1", function (d) {
        return d.source.x;
    })
        .attr("y1", function (d) {
        return d.source.y;
    })
        .attr("x2", function (d) {
        return d.target.x;
    })
        .attr("y2", function (d) {
        return d.target.y;
    });

    node.attr("cx", function (d) {
        return d.x;
    })
        .attr("cy", function (d) {
        return d.y;
    });
});


</script>
<div>This file is adapted from:
	<a href="http://www.coppelia.io/2014/07/an-a-to-z-of-extra-features-for-the-d3-force-layout/">
		http://www.coppelia.io/2014/07/an-a-to-z-of-extra-features-for-the-d3-force-layout/
	</a>
